<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <h1>Mesa de Ayuda</h1>
      <div class="user-info">
        <span *ngIf="currentUser">Bienvenido, {{ currentUser.nombre }} ({{ getRoleDisplayName(currentUser.rol) }})</span>
        <button class="logout-btn" (click)="logout()">Cerrar SesiÃ³n</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="dashboard-main">
    <!-- Stats Cards -->
    <div class="stats-grid" *ngIf="!isLoading">
      <div class="stat-card">
        <div class="stat-icon total">ðŸ“Š</div>
        <div class="stat-content">
          <h3>{{ stats.totalTickets }}</h3>
          <p>Total de Tickets</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon open">ðŸ”´</div>
        <div class="stat-content">
          <h3>{{ stats.ticketsAbiertos }}</h3>
          <p>Tickets Abiertos</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon review">ðŸŸ¡</div>
        <div class="stat-content">
          <h3>{{ stats.ticketsRevision }}</h3>
          <p>En RevisiÃ³n</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon resolved">ðŸŸ¢</div>
        <div class="stat-content">
          <h3>{{ stats.ticketsResueltos }}</h3>
          <p>Resueltos</p>
        </div>
      </div>
    </div>

    <!-- Loading -->
    <div class="loading" *ngIf="isLoading">
      <p>Cargando datos del dashboard...</p>
    </div>

    <!-- Quick Actions -->
    <div class="actions-section">
      <h2>Acciones RÃ¡pidas</h2>
      <div class="action-buttons">
        <a routerLink="/tickets/create" class="action-btn primary" *ngIf="currentUser?.rol === 3">
          <span>âž•</span> Crear Nuevo Ticket
        </a>
        <a routerLink="/tickets" class="action-btn secondary">
          <span>ðŸ“‹</span> Ver Todos los Tickets
        </a>
        <a routerLink="/users" class="action-btn admin" *ngIf="currentUser?.rol === 1">
          <span>ðŸ‘¥</span> Gestionar Usuarios
        </a>
      </div>
    </div>

    <!-- Recent Tickets -->
    <div class="recent-tickets" *ngIf="!isLoading && recentTickets.length > 0">
      <h2>Tickets Recientes</h2>
      <div class="tickets-list">
        <div class="ticket-item" *ngFor="let ticket of recentTickets">
          <div class="ticket-header">
            <span class="ticket-id">#{{ ticket.id }}</span>
            <span class="ticket-status" [ngClass]="getStatusColor(ticket.estado)">
              {{ ticket.estado }}
            </span>
          </div>
          <div class="ticket-content">
            <h4>{{ ticket.descripcion }}</h4>
            <p class="ticket-meta">
              <span>ðŸ‘¤ {{ ticket.usuarioRutCreadorNavigation.nombre }}</span>
              <span>ðŸ“… {{ ticket.fechaCreacion | date:'short' }}</span>
              <span *ngIf="ticket.usuarioRutTecnicoNavigation">
                ðŸ”§ {{ ticket.usuarioRutTecnicoNavigation.nombre }}
              </span>
            </p>
          </div>
        </div>
      </div>
      <a routerLink="/tickets" class="view-all-link">Ver todos los tickets â†’</a>
    </div>
  </main>
</div>
